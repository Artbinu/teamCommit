# teamCommit

# ✅ **급여 조회 프로그램 기능 요약**

---

### 1. **로그인 기능**

- **관리자**와 **일반 사용자**가 로그인할 수 있다.
- 로그인 시, **비밀번호는 해시**되어 DB에 저장된다.
- 로그인 후, 사용자의 **역할**에 따라 다르게 접근할 수 있다.

### 2. **일반 사용자 기능 (role='user')**

- **급여 조회** 기능만 가능.
- 자신의 급여 정보를 조회할 수 있다.

### 3. **관리자 기능 (role='admin')**

- **급여 추가**: 특정 사용자에게 급여 정보 추가
- **급여 수정**: 기존 급여 정보 수정
- **급여 삭제**: 급여 정보 삭제
- **사용자 관리**:
    - **사용자 목록 보기**
    - **사용자 등록**: 관리자가 사용자 아이디와 비밀번호를 생성할 수 있다.
    - **사용자 정보 수정**
    - **사용자 삭제**

### 4. **DB 구조**

- **users** 테이블: 로그인할 사용자 정보 저장 (`id`, `username`, `password_hash`, `role`)
- **salaries** 테이블: 급여 정보 저장 (`id`, `user_id`, `base_salary`, `tax`, `net_salary`, `paid_date`)

### 5. **관리자만 사용자 계정 생성 가능**

- 관리자는 사용자가 가입할 필요 없이, **아이디**와 **비밀번호**를 직접 생성할 수 있다.
- **비밀번호는 해시화**하여 저장된다.

---

### 🔒 **보안 강화**

- **비밀번호 보안**: 비밀번호 복잡성 검사 추가 (예: 길이, 대소문자 포함, 숫자 및 특수문자 포함 여부 확인)
- **세션 관리**: 세션 하이재킹을 방지하기 위해 `Secure`와 `HttpOnly` 옵션을 사용하는 방식으로 세션 보안 강화
- **입력값 검증**: SQL Injection 방지 및 유효성 검사 철저히 수행
- **세션 만료**: 세션 만료 시간 설정

---

### 📜 **로그 기록 및 감사**

- **로그 기록**: 관리자와 사용자의 중요한 작업(급여 추가/수정/삭제 등)을 기록
- **감사 로그**: 사용자와 관리자가 수행한 작업에 대한 **시간, 사용자, 작업 내용** 등을 기록하여 감사 기능 제공

---

### 📣 **알림 시스템**

- **급여 정보 업데이트**: 급여 정보가 추가, 수정, 삭제될 때 **관리자**에게 알림 발송
- **사용자 추가**: 관리자가 사용자를 추가할 때 **알림** 제공
- **중요 작업**에 대한 알림을 이메일 또는 시스템 내 알림으로 제공

---

### 📄 **기능 흐름**

1. **로그인 페이지**(`/login`): 사용자 인증 후, **일반 사용자**는 급여 조회만 가능하고, **관리자**는 사용자 관리 및 급여 관리 기능을 사용할 수 있다.
2. **관리자 대시보드**(`/admin`): 관리자만 접근 가능하며, 급여 추가/수정/삭제 및 사용자 관리 가능.
3. **사용자 급여 조회 페이지**(`/salary`): 사용자 본인의 급여 정보만 조회 가능.
4. **로그 기록 및 알림 시스템**: 관리자가 사용자 정보를 추가하거나 급여를 수정할 때마다 로그가 기록되고, 관련된 알림이 관리자에게 발송된다.

---

### 💻 **서버 환경**

1. **웹서버**:
    - 운영 체제: **Ubuntu 20.04.6**
    - Gunicorn  사용
2. **DB 서버**:
    - 운영 체제: NAS
    - DB: **MariaDB**
    - 원격 접속 허용
    - **payroll_db** 데이터베이스 및 사용자 계정 생성
    
3. **서버 간 연결**:
    - 웹서버와 DB 서버가 서로 통신할 수 있도록 **방화벽 설정** 및 **IP 허용** 설정