
# 📛 급여 조회 프로그램 보안 취약점 분석

이 문서는 급여 조회 프로그램의 소스 코드에 포함된 주요 보안 취약점들을 식별하고, 각 취약점에 대한 설명 및 권장 개선 방안을 함께 제공합니다.

## 1. ❌ DB 연결 정보 하드코딩

```python
DB_HOST = "localhost"
DB_PORT = 3306
DB_USER = "root"
DB_PASSWORD = "password"
DB_NAME = "payroll_db"
```

- **문제점**: 데이터베이스 접속 정보가 코드에 **직접 하드코딩**되어 있음.
- **위험성**: 코드 유출 시 데이터베이스에 무단 접근이 가능해짐.
- **개선방안**: `.env` 파일이나 운영체제의 환경변수를 사용하여 민감 정보를 분리 관리.

## 2. ❌ 비밀번호 해싱 검증 제거

```python
if result and result[0] == password:  # 🔑 SHA-256 해싱 제거
```

- **문제점**: 사용자의 비밀번호를 **해싱 없이 평문으로 비교**함.
- **위험성**: DB에 저장된 비밀번호가 평문일 경우, 보안사고 시 사용자 정보가 그대로 노출됨.
- **개선방안**: `hashlib.sha256` 또는 `bcrypt` 등 해시 알고리즘을 이용하여 비밀번호를 해싱하고 비교.

## 3. ❌ 로그인 차단 기능 부재

```python
while True:
    username = input("아이디 입력: ")
    password = input("비밀번호 입력: ")
```

- **문제점**: 로그인 시도 횟수에 **제한이 없음**.
- **위험성**: 무차별 대입 공격(Brute-force Attack)에 취약.
- **개선방안**: 로그인 시도 횟수 제한, 일정 시간 동안 로그인 불가, CAPTCHA 적용 등.

## 4. ❌ 관리자 권한 검증 미비

```python
role = "admin" if username == "admin" else "user"
```

- **문제점**: 관리자 여부를 단순히 아이디가 `"admin"`인지로 판별.
- **위험성**: 사용자 테이블의 `"admin"` 계정만 알면 관리자 권한 탈취 가능.
- **개선방안**: 사용자 테이블에 `role` 필드를 두고 DB에서 역할을 확인하도록 개선.

## 5. ❌ 사용자 입력값 검증 없음

```python
username = input("아이디 입력: ")
password = input("비밀번호 입력: ")
```

- **문제점**: 입력값에 대한 유효성 검사 미비.
- **위험성**: SQL Injection 가능성은 줄였지만, 예상치 못한 입력으로 시스템 동작이 왜곡될 수 있음.
- **개선방안**: 정규 표현식 등을 이용하여 입력값에 대한 형식 검증 추가.

## 6. ❌ 감사 로그(Audit Log) 기능 없음

- **문제점**: 로그인 및 급여 조회 등의 **행위 로그가 저장되지 않음**.
- **위험성**: 보안 사고 발생 시, 원인 파악 및 추적이 어려움.
- **개선방안**: 로그인 시도, 급여 정보 접근 등을 DB 또는 로그 파일에 기록.

## 7. ❌ 세션 및 인증 관리 부재

- **문제점**: 로그인 후 별도의 **세션 관리 기능이 없음**.
- **위험성**: 인증 상태 추적이 되지 않으며, 로그인된 사용자 간 세션 구분이 불가.
- **개선방안**: 웹 기반 시스템이라면 세션 쿠키, 토큰 기반 인증 등 사용 필요.

## 8. ❌ HTTPS 미사용 전제

- **문제점**: 사용자 입력(아이디/비밀번호) 정보가 평문 전송될 수 있음.
- **위험성**: 네트워크 상에서 중간자 공격(MITM)에 노출.
- **개선방안**: 배포 시 SSL 인증서를 적용하여 HTTPS 통신 필수화.

## ✅ 정리된 개선 체크리스트

| 항목 | 취약점 여부 | 개선 필요 |
|------|-------------|------------|
| DB 인증정보 보안 | ❌ | ✅ 환경변수 사용 |
| 비밀번호 해싱 | ❌ | ✅ SHA-256 또는 bcrypt 사용 |
| 로그인 시도 제한 | ❌ | ✅ 계정 잠금 기능 추가 |
| 관리자 권한 검증 | ❌ | ✅ DB 기반 역할 확인 |
| 입력값 검증 | ❌ | ✅ 정규식 검증 |
| 감사 로그 | ❌ | ✅ 로그 기록 저장 |
| 세션 관리 | ❌ | ✅ 세션/토큰 기반 인증 추가 |
| HTTPS 적용 | ❌ | ✅ SSL 인증서 설정 |

---

💡 **참고**: 이 문서는 보안 교육, 코드 리뷰, 시스템 개선 계획 등에 활용할 수 있습니다.
